module controller_top (
    input wire CLOCK_50,
    input wire reset,
    output [11:0] LEDR,
    inout wire [35:0] GPIO
);
    reg flag = 0;
    reg [31:0] counter = 0;

    localparam CLOCK_COUNTER = 32'd50000000;
    localparam FLAG_COUNTER = 16'd2000;

    always @(posedge CLOCK_50) begin
        if (counter == (CLOCK_COUNTER + FLAG_COUNTER)) begin
            flag <= 0;
            counter <= 0;
        end
        else if (counter == CLOCK_COUNTER) flag <= 1;
        else begin
            counter <= counter + 1;
        end
    end 

    controller_reader controller (
        .clk(CLOCK_50),
        .LEDR(LEDR),
        .reset(reset),
        .flag(flag),
        .select(GPIO[29]),
        .PIN_UP_Z(GPIO[35]),
        .PIN_DOWN_Y(GPIO[31]),
        .PIN_LEFT_X(GPIO[27]),
        .PIN_RIGHT_MODE(GPIO[25]),
        .PIN_A_B(GPIO[33]),
        .PIN_START_C(GPIO[23])
    );
endmodule